COMPILER=erlc

vpath %.erl src 

BEAMS = $(patsubst %.erl,ebin/%.beam,$(wildcard *.erl))

HEADERS = $(wildcard *.hrl)
EFLAGS = +debug_info 

all: ebin main

main: ${BEAMS}

ebin:
	mkdir -p ebin

specs: $(SPECBEAMS)

$(SPECBEAMS): $(SPECSOURCES)
	$(COMPILER) -pa ebin $(EFLAGS) -o ebin $(SPECSOURCES)

ebin/%.beam: %.erl $(HEADERS) $(SPECBEAMS)
	$(COMPILER) -I ~/gits/shared_resources_erlang/src -pa ~/gits/shared_resources_erlang/ebin -pa ebin $(EFLAGS) -o ebin $<

dialyzer: ebin main
	dialyzer ebin/*beam examples/*/ebin

docs:
	make edoc

clean:
	rm -f ebin/*.beam 	
	(cd examples; make clean)



